## 413. 等差数列划分

数组 A 包含 N 个数，且索引从0开始。数组 A 的一个子数组划分为数组 (P, Q)，P 与 Q 是整数且满足 0<=P<Q<N 。

如果满足以下条件，则称子数组(P, Q)为等差数组：

元素 A\[P], A\[p + 1], ..., A\[Q - 1], A\[Q] 是等差的。并且 P + 1 < Q 。

函数要返回数组 A 中所有为等差数组的子数组个数。

示例：

```
A = [1, 2, 3, 4]

返回: 3, A 中有三个子等差数组: [1, 2, 3], [2, 3, 4] 以及自身 [1, 2, 3, 4]。
```

> 思路：dp，dp\[i] = dp\[i - 1] + (当前成立的等差数组长度 - 3) + 1
> 例如 \[1,2,3] 123已成立，如果 1234 的话，则会多出两个 1234 和 234

```javascript
/**
 * @param {number[]} A
 * @return {number}
 */
var numberOfArithmeticSlices = function(A) {
  let len = A.length
  if (len < 3) return 0
  let dp = 2, result = 0,diff = A[1] - A[0]
  for (let i = 2; i < len; i++) {
    if (A[i] - A[i - 1] === diff) {
      dp++
      result += dp - 3 + 1
    } else {
      diff = A[i] - A[i - 1]
      dp = 2
    }
  }
  return result
};
```

## 494. 目标和

给定一个非负整数数组，a1, a2, ..., an, 和一个目标数，S。现在你有两个符号 + 和 -。对于数组中的任意一个整数，你都可以从 + 或 -中选择一个符号添加在前面。

返回可以使最终数组和为目标数 S 的所有添加符号的方法数。

示例 1:

```
输入: nums: [1, 1, 1, 1, 1], S: 3
输出: 5
解释: 

-1+1+1+1+1 = 3
+1-1+1+1+1 = 3
+1+1-1+1+1 = 3
+1+1+1-1+1 = 3
+1+1+1+1-1 = 3

一共有5种方法让最终目标和为3。
```

> 思路：
> 方法一：倒序记录如果得出这个结果，需要前面的数为几，可以通过记录该位置的最大值和最小值来进行剪枝
> 方法二：

```javascript
/**
 * 方法一
 * @param {number[]} nums
 * @param {number} S
 * @return {number}
 */
var findTargetSumWays = function (nums, S) {
  let sum1 = [], sum2 = [], sum = 0
  for (let i = 0; i < nums.length; i++) {
    sum += nums[i]
    sum1[i] = sum
    sum2[i] = -sum
  }
  let result = [S]
  for (let i = nums.length - 1; i >= 0; i--) {
    let tmp = []
    for (let val of result) {
      let s1 = nums[i] + val,
          s2 = nums[i] - val
      if (
        (s1 <= sum1[i] && s1 >= sum2[i]) ||
        (s1 >= sum1[i] && s1 <= sum2[i])
      ) {
        tmp.push(s1)
      }
      if (
        (s2 <= sum1[i] && s2 >= sum2[i]) ||
        (s2 >= sum1[i] && s2 <= sum2[i])
      ) {
        tmp.push(s2)
      }
    }
    result = tmp
  }
  let n = 0
  for (let val of result) n++
  return n
};
```